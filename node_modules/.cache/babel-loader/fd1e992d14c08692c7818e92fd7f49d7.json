{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\connect-four-game-main\\\\src\\\\components\\\\UI\\\\timer\\\\Timer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { TimerWrapper, PlayerName, Time } from './TimerStlyes';\nimport TurnRed from '../../../assets/images/turn-background-red.svg';\nimport TurnYellow from '../../../assets/images/turn-background-yellow.svg';\nimport { useAppSelector, useAppDispatch } from '../../../store/hooks';\nimport { useSelector } from 'react-redux';\nimport { selectTurn, selectTimer, selectCurrentPlayer, selectIsGamePaused, updateTimer, changeTurn } from '../../../store/gameSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bgs = {\n  red: TurnRed,\n  yellow: TurnYellow\n};\nconst textColor = {\n  red: 'var(--color-white)',\n  yellow: 'var(--color-black)'\n};\nconst Timer = () => {\n  _s();\n  const game = useSelector(state => state.game);\n  const turn = useAppSelector(selectTurn);\n  const timer = useAppSelector(selectTimer);\n  const isGamePaused = useAppSelector(selectIsGamePaused);\n  const currentPlayer = useAppSelector(selectCurrentPlayer);\n  const dispatch = useAppDispatch();\n  const player = game[currentPlayer].name === 'You' ? 'your' : `${game[currentPlayer].name}'s`;\n\n  // keep tracking of current timer, not the best one but for 30s interval is enough\n  useEffect(() => {\n    if (isGamePaused) return;\n    const timeout = setTimeout(function () {\n      const newTime = timer - 1;\n      dispatch(updateTimer(newTime));\n    }, 1000);\n    if (timer <= 0) {\n      dispatch(changeTurn());\n    }\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [dispatch, timer, isGamePaused]);\n  return /*#__PURE__*/_jsxDEV(TimerWrapper, {\n    bg: bgs[turn],\n    textcolor: textColor[turn],\n    \"data-testid\": \"timer\",\n    children: [/*#__PURE__*/_jsxDEV(PlayerName, {\n      children: [player, \" turn\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Time, {\n      children: [timer, \"s\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(Timer, \"Dy91MvawhihmE6GHcBoEU6eYzKI=\", false, function () {\n  return [useSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppDispatch];\n});\n_c = Timer;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useEffect","TimerWrapper","PlayerName","Time","TurnRed","TurnYellow","useAppSelector","useAppDispatch","useSelector","selectTurn","selectTimer","selectCurrentPlayer","selectIsGamePaused","updateTimer","changeTurn","bgs","red","yellow","textColor","Timer","game","state","turn","timer","isGamePaused","currentPlayer","dispatch","player","name","timeout","setTimeout","newTime","clearTimeout"],"sources":["C:/wamp64/www/connect-four-game-main/src/components/UI/timer/Timer.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { TimerWrapper, PlayerName, Time } from './TimerStlyes';\n\nimport TurnRed from '../../../assets/images/turn-background-red.svg';\nimport TurnYellow from '../../../assets/images/turn-background-yellow.svg';\nimport { useAppSelector, useAppDispatch } from '../../../store/hooks';\nimport { RootState } from '../../../store/store';\nimport { useSelector } from 'react-redux';\nimport {\n  selectTurn,\n  selectTimer,\n  selectCurrentPlayer,\n  selectIsGamePaused,\n  updateTimer,\n  changeTurn,\n} from '../../../store/gameSlice';\n\nconst bgs: { [key: string]: string } = {\n  red: TurnRed,\n  yellow: TurnYellow,\n};\n\nconst textColor: { [key: string]: string } = {\n  red: 'var(--color-white)',\n  yellow: 'var(--color-black)',\n};\n\nconst Timer: React.FC = () => {\n  const game = useSelector((state: RootState) => state.game);\n  const turn = useAppSelector(selectTurn);\n  const timer = useAppSelector(selectTimer);\n  const isGamePaused = useAppSelector(selectIsGamePaused);\n  const currentPlayer = useAppSelector(selectCurrentPlayer);\n\n  const dispatch = useAppDispatch();\n\n  const player =\n    game[currentPlayer].name === 'You'\n      ? 'your'\n      : `${game[currentPlayer].name}'s`;\n\n  // keep tracking of current timer, not the best one but for 30s interval is enough\n  useEffect(() => {\n    if (isGamePaused) return;\n    const timeout = setTimeout(function () {\n      const newTime = timer - 1;\n      dispatch(updateTimer(newTime));\n    }, 1000);\n\n    if (timer <= 0) {\n      dispatch(changeTurn());\n    }\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [dispatch, timer, isGamePaused]);\n\n  return (\n    <TimerWrapper\n      bg={bgs[turn]}\n      textcolor={textColor[turn]}\n      data-testid=\"timer\"\n    >\n      <PlayerName>{player} turn</PlayerName>\n      <Time>{timer}s</Time>\n    </TimerWrapper>\n  );\n};\n\nexport default Timer;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,SAASC,YAAY,EAAEC,UAAU,EAAEC,IAAI,QAAQ,eAAe;AAE9D,OAAOC,OAAO,MAAM,gDAAgD;AACpE,OAAOC,UAAU,MAAM,mDAAmD;AAC1E,SAASC,cAAc,EAAEC,cAAc,QAAQ,sBAAsB;AAErE,SAASC,WAAW,QAAQ,aAAa;AACzC,SACEC,UAAU,EACVC,WAAW,EACXC,mBAAmB,EACnBC,kBAAkB,EAClBC,WAAW,EACXC,UAAU,QACL,0BAA0B;AAAC;AAElC,MAAMC,GAA8B,GAAG;EACrCC,GAAG,EAAEZ,OAAO;EACZa,MAAM,EAAEZ;AACV,CAAC;AAED,MAAMa,SAAoC,GAAG;EAC3CF,GAAG,EAAE,oBAAoB;EACzBC,MAAM,EAAE;AACV,CAAC;AAED,MAAME,KAAe,GAAG,MAAM;EAAA;EAC5B,MAAMC,IAAI,GAAGZ,WAAW,CAAEa,KAAgB,IAAKA,KAAK,CAACD,IAAI,CAAC;EAC1D,MAAME,IAAI,GAAGhB,cAAc,CAACG,UAAU,CAAC;EACvC,MAAMc,KAAK,GAAGjB,cAAc,CAACI,WAAW,CAAC;EACzC,MAAMc,YAAY,GAAGlB,cAAc,CAACM,kBAAkB,CAAC;EACvD,MAAMa,aAAa,GAAGnB,cAAc,CAACK,mBAAmB,CAAC;EAEzD,MAAMe,QAAQ,GAAGnB,cAAc,EAAE;EAEjC,MAAMoB,MAAM,GACVP,IAAI,CAACK,aAAa,CAAC,CAACG,IAAI,KAAK,KAAK,GAC9B,MAAM,GACL,GAAER,IAAI,CAACK,aAAa,CAAC,CAACG,IAAK,IAAG;;EAErC;EACA5B,SAAS,CAAC,MAAM;IACd,IAAIwB,YAAY,EAAE;IAClB,MAAMK,OAAO,GAAGC,UAAU,CAAC,YAAY;MACrC,MAAMC,OAAO,GAAGR,KAAK,GAAG,CAAC;MACzBG,QAAQ,CAACb,WAAW,CAACkB,OAAO,CAAC,CAAC;IAChC,CAAC,EAAE,IAAI,CAAC;IAER,IAAIR,KAAK,IAAI,CAAC,EAAE;MACdG,QAAQ,CAACZ,UAAU,EAAE,CAAC;IACxB;IACA,OAAO,MAAM;MACXkB,YAAY,CAACH,OAAO,CAAC;IACvB,CAAC;EACH,CAAC,EAAE,CAACH,QAAQ,EAAEH,KAAK,EAAEC,YAAY,CAAC,CAAC;EAEnC,oBACE,QAAC,YAAY;IACX,EAAE,EAAET,GAAG,CAACO,IAAI,CAAE;IACd,SAAS,EAAEJ,SAAS,CAACI,IAAI,CAAE;IAC3B,eAAY,OAAO;IAAA,wBAEnB,QAAC,UAAU;MAAA,WAAEK,MAAM;IAAA;MAAA;MAAA;MAAA;IAAA,QAAmB,eACtC,QAAC,IAAI;MAAA,WAAEJ,KAAK;IAAA;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QACR;AAEnB,CAAC;AAAC,GAxCIJ,KAAe;EAAA,QACNX,WAAW,EACXF,cAAc,EACbA,cAAc,EACPA,cAAc,EACbA,cAAc,EAEnBC,cAAc;AAAA;AAAA,KAP3BY,KAAe;AA0CrB,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}